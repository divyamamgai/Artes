(function(b,h,f){var g,e,a=f('<li class="skill"><span class="skill-name"></span></li>');function c(j){var i;var k;for(var d=0;d<j.length;d++){i=j[d];k=a.clone();f(".skill-name",k).text(i.name);e.append(k)}}f(function(){g=f("#add-skills-input",h);if(g.length>0){g.tokenize2({dataSource:function(i,d){f.ajax("/skills/search/"+encodeURIComponent(i),{dataType:"json",success:function(k){var j=k.map(function(l){return{value:l.id,text:l.name}});d.trigger("tokenize:dropdown:fill",[j])}})}})}e=f(".skill-list",h)});f(h).on("click",".message .fa-close",function(){f(this).parent().remove()}).on("click",".pop-up .fa-times-circle",function(){f(this).parent().parent().parent().parent().parent().css("display","none")}).on("click","#add-skills-button",function(){f("#pop-up-add-skills",h).css("display","block")}).on("click","#add-skills-submit-button",function(){f.ajax("/skills/add/",{method:"POST",data:{skill_ids:g.val()},dataType:"json",success:function(d){c(d);f("#pop-up-add-skills",h).css("display","none")},error:function(){alert("Error occurred while adding skills, please try again!")}})}).on("click",".skill-endorse-create-button",function(){var n=f(this),m=n.parent(),i=f(".skill-endorse-count",m),k=f(".skill-endorse-delete-button",m),l=f(".skill-endorse-loading",m);var d=m.data("user-id"),j=m.data("skill-id");f.ajax("/user/"+d+"/endorse/"+j,{method:"POST",beforeSend:function(){l.removeClass("hide");n.addClass("hide")},success:function(o){i.text(parseInt(i.text())+1).removeClass("hide");k.removeClass("hide")},error:function(){alert("Error occurred while endorsing, please try again!");n.removeClass("hide")},complete:function(){l.addClass("hide")}})}).on("click",".skill-endorse-delete-button",function(){var k=f(this),n=k.parent(),i=f(".skill-endorse-count",n),m=f(".skill-endorse-create-button",n),l=f(".skill-endorse-loading",n);var d=n.data("user-id"),j=n.data("skill-id");f.ajax("/user/"+d+"/endorse/"+j,{method:"DELETE",beforeSend:function(){l.removeClass("hide");k.addClass("hide")},success:function(p){var q=parseInt(i.text())-1;var o=f(".skill-endorser-photo-user-"+p.endorser_id,n);i.text(q);if(q===0){i.addClass("hide")}m.removeClass("hide");k.addClass("hide");if(o.length>0){o.remove()}},error:function(){alert("Error occurred while renouncing your endorsement, please try again!");k.removeClass("hide")},complete:function(){l.addClass("hide")}})})})(window,document,jQuery);