(function(b,i,f){var h,g,e,a=f('<li class="skill"><span class="skill-name"></span></li>');function c(k){var j;var l;for(var d=0;d<k.length;d++){j=k[d];l=a.clone();f(".skill-name",l).text(j.name);e.append(l)}}f(function(){h=f("#add-skills-input",i);if(h.length>0){h.tokenize2({dataSource:function(j,d){f.ajax("/skills/search/"+encodeURIComponent(j),{dataType:"json",success:function(l){var k=l.map(function(m){return{value:m.id,text:m.name}});d.trigger("tokenize:dropdown:fill",[k])}})}})}g=f(".add-skills-loading",i);e=f(".skill-list",i)});f(i).on("click",".message .fa-close",function(){f(this).parent().remove()}).on("click",".pop-up .fa-times-circle",function(){f(this).parent().parent().parent().parent().parent().addClass("hide")}).on("click","#add-skills-button",function(){f("#pop-up-add-skills",i).removeClass("hide")}).on("click","#add-skills-submit-button",function(){var d=f(this);f.ajax("/skills/add/",{method:"POST",data:{skill_ids:h.val()},dataType:"json",beforeSend:function(){d.addClass("hide");g.removeClass("hide")},success:function(j){c(j);f("#pop-up-add-skills",i).addClass("hide")},error:function(){alert("Error occurred while adding skills, please try again!")},complete:function(){d.removeClass("hide");g.addClass("hide")}})}).on("click",".skill-endorse-create-button",function(){var o=f(this),n=o.parent(),j=f(".skill-endorse-count",n),m=f(".skill-endorse-delete-button",n),l=f(".skill-operation-loading",n);var d=n.data("user-id"),k=n.data("skill-id");f.ajax("/user/"+d+"/endorse/"+k,{method:"POST",beforeSend:function(){l.removeClass("hide");o.addClass("hide")},success:function(p){j.text(parseInt(j.text())+1).removeClass("hide");m.removeClass("hide")},error:function(){alert("Error occurred while endorsing, please try again!");o.removeClass("hide")},complete:function(){l.addClass("hide")}})}).on("click",".skill-endorse-delete-button",function(){var m=f(this),o=m.parent(),j=f(".skill-endorse-count",o),n=f(".skill-endorse-create-button",o),l=f(".skill-operation-loading",o);var d=o.data("user-id"),k=o.data("skill-id");f.ajax("/user/"+d+"/endorse/"+k,{method:"DELETE",beforeSend:function(){l.removeClass("hide");m.addClass("hide")},success:function(q){var r=parseInt(j.text())-1;var p=f(".skill-endorser-photo-user-"+q.endorser_id,o);j.text(r);if(r===0){j.addClass("hide")}n.removeClass("hide");m.addClass("hide");if(p.length>0){p.remove()}},error:function(){alert("Error occurred while renouncing your endorsement, please try again!");m.removeClass("hide")},complete:function(){l.addClass("hide")}})}).on("click",".skill-delete-button",function(){var d=f(this),l=d.parent(),k=f(".skill-operation-loading",l);var j=l.data("skill-id");f.ajax("/user/skills/"+j,{method:"DELETE",beforeSend:function(){k.removeClass("hide");d.addClass("hide")},success:function(m){l.remove()},error:function(){alert("Error occurred while deleting skill, please try again!");d.removeClass("hide")},complete:function(){k.addClass("hide")}})})})(window,document,jQuery);